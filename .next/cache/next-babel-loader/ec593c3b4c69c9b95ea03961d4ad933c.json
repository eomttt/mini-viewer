{"ast":null,"code":"var _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/Viewer.tsx\";\nvar __jsx = React.createElement;\n\n/* eslint-disable react/no-danger */\nimport React, { useState, useRef, useCallback, useMemo, useEffect } from 'react';\nimport { ViewArticle, ViewSection, Contents, LeftButton, RightButton } from '../../styles/viewer';\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\nconst Viewer = ({\n  viewerWidth,\n  viewerHeight,\n  isShowPrevViewer,\n  wholeColumnCount,\n  spine,\n  viewerSpine,\n  setNextSpine,\n  setPrevSpine\n}) => {\n  const {\n    0: nowViewerCount,\n    1: setNowViewerCount\n  } = useState(0);\n  const hasNextViewer = useMemo(() => nowViewerCount < wholeColumnCount, [nowViewerCount, wholeColumnCount]);\n  const hasPrevViewer = useMemo(() => nowViewerCount > 0, [nowViewerCount]);\n  const viewArticleRef = useRef(null);\n  useEffect(() => {\n    if (isShowPrevViewer) {\n      const {\n        current: viewArticleRefCurrent\n      } = viewArticleRef;\n      viewArticleRefCurrent.scrollLeft = wholeColumnCount * (viewerWidth + VIEWER_PAGE_GAP);\n      setNowViewerCount(wholeColumnCount);\n    }\n  }, [isShowPrevViewer, viewerWidth, wholeColumnCount]);\n  const clickRight = useCallback(() => {\n    const {\n      current: viewArticleRefCurrent\n    } = viewArticleRef;\n\n    if (hasNextViewer) {\n      setNowViewerCount(nowViewerCount + 1);\n      viewArticleRefCurrent.scrollLeft += viewerWidth + VIEWER_PAGE_GAP;\n    } else {\n      viewArticleRefCurrent.scrollLeft = 0;\n      setNowViewerCount(0);\n      setNextSpine();\n    }\n  }, [hasNextViewer, nowViewerCount, viewerWidth, setNextSpine]);\n  const clickLeft = useCallback(() => {\n    const {\n      current: viewArticleRefCurrent\n    } = viewArticleRef;\n\n    if (hasPrevViewer) {\n      setNowViewerCount(nowViewerCount - 1);\n      viewArticleRefCurrent.scrollLeft -= viewerWidth + VIEWER_PAGE_GAP;\n    } else {\n      viewArticleRefCurrent.scrollLeft = 0;\n      setNowViewerCount(0);\n      setPrevSpine();\n    }\n  }, [hasPrevViewer, nowViewerCount, viewerWidth, setPrevSpine]);\n  return __jsx(React.Fragment, null, __jsx(ViewArticle, {\n    ref: viewArticleRef,\n    onClick: clickRight,\n    styleProps: {\n      width: viewerWidth,\n      height: viewerHeight\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(ViewSection, {\n    styleProps: {\n      width: viewerWidth,\n      height: viewerHeight\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(Contents, {\n    dangerouslySetInnerHTML: {\n      __html: viewerSpine\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), __jsx(LeftButton, {\n    onClick: clickLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Left\"), __jsx(RightButton, {\n    onClick: clickRight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Right\"));\n};\n\nexport default Viewer;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/Viewer.tsx"],"names":["React","useState","useRef","useCallback","useMemo","useEffect","ViewArticle","ViewSection","Contents","LeftButton","RightButton","VIEWER_PAGE_GAP","Viewer","viewerWidth","viewerHeight","isShowPrevViewer","wholeColumnCount","spine","viewerSpine","setNextSpine","setPrevSpine","nowViewerCount","setNowViewerCount","hasNextViewer","hasPrevViewer","viewArticleRef","current","viewArticleRefCurrent","scrollLeft","clickRight","clickLeft","width","height","__html"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-danger */\nimport React, {\n  useState, useRef, useCallback, useMemo, useEffect,\n} from 'react';\n\nimport { EpubSpineItem } from '../../interfaces/books';\n\nimport {\n  ViewArticle, ViewSection, Contents,\n  LeftButton, RightButton,\n} from '../../styles/viewer';\n\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\ninterface Props {\n  viewerWidth: number;\n  viewerHeight: number;\n  isShowPrevViewer: boolean;\n  wholeColumnCount: number;\n  spine: EpubSpineItem;\n  viewerSpine: string;\n  setNextSpine: () => void;\n  setPrevSpine: () => void;\n}\n\nconst Viewer: React.FunctionComponent<Props> = ({\n  viewerWidth, viewerHeight,\n  isShowPrevViewer, wholeColumnCount,\n  spine, viewerSpine,\n  setNextSpine, setPrevSpine,\n}) => {\n  const [nowViewerCount, setNowViewerCount] = useState(0);\n\n  const hasNextViewer = useMemo(() => nowViewerCount < wholeColumnCount, [nowViewerCount, wholeColumnCount]);\n  const hasPrevViewer = useMemo(() => nowViewerCount > 0, [nowViewerCount]);\n\n  const viewArticleRef = useRef(null);\n\n  useEffect(() => {\n    if (isShowPrevViewer) {\n      const { current: viewArticleRefCurrent } = viewArticleRef;\n\n      viewArticleRefCurrent.scrollLeft = wholeColumnCount * (viewerWidth + VIEWER_PAGE_GAP);\n      setNowViewerCount(wholeColumnCount);\n    }\n  }, [isShowPrevViewer, viewerWidth, wholeColumnCount]);\n\n  const clickRight = useCallback(() => {\n    const { current: viewArticleRefCurrent } = viewArticleRef;\n    if (hasNextViewer) {\n      setNowViewerCount(nowViewerCount + 1);\n      viewArticleRefCurrent.scrollLeft += (viewerWidth + VIEWER_PAGE_GAP);\n    } else {\n      viewArticleRefCurrent.scrollLeft = 0;\n      setNowViewerCount(0);\n      setNextSpine();\n    }\n  }, [hasNextViewer, nowViewerCount, viewerWidth, setNextSpine]);\n\n  const clickLeft = useCallback(() => {\n    const { current: viewArticleRefCurrent } = viewArticleRef;\n\n    if (hasPrevViewer) {\n      setNowViewerCount(nowViewerCount - 1);\n      viewArticleRefCurrent.scrollLeft -= (viewerWidth + VIEWER_PAGE_GAP);\n    } else {\n      viewArticleRefCurrent.scrollLeft = 0;\n      setNowViewerCount(0);\n      setPrevSpine();\n    }\n  }, [hasPrevViewer, nowViewerCount, viewerWidth, setPrevSpine]);\n\n  return (\n    <>\n      <ViewArticle\n        ref={viewArticleRef}\n        onClick={clickRight}\n        styleProps={{\n          width: viewerWidth,\n          height: viewerHeight,\n        }}\n      >\n        <ViewSection\n          styleProps={{\n            width: viewerWidth,\n            height: viewerHeight,\n          }}\n        >\n          <Contents dangerouslySetInnerHTML={{ __html: viewerSpine }} />\n        </ViewSection>\n      </ViewArticle>\n      <LeftButton onClick={clickLeft}>Left</LeftButton>\n      <RightButton onClick={clickRight}>Right</RightButton>\n    </>\n  );\n};\n\nexport default Viewer;\n"]},"metadata":{},"sourceType":"module"}