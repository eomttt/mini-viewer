{"ast":null,"code":"var _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerPage.tsx\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useEffect } from 'react';\nimport ViewerCount from './ViewerCount';\nimport { VIEWER_WIDTH_RATIO, VIEWER_HEIGHT_RATIO } from '../../constants/viewer';\n\nconst ViewerPage = ({\n  spines,\n  viewerSpines\n}) => {\n  const {\n    0: viewerWidth,\n    1: setViewerWidth\n  } = useState(0);\n  const {\n    0: viewerHeight,\n    1: setViewerHeight\n  } = useState(0);\n  const {\n    0: spineColumnCountList,\n    1: setSpineColumnCountList\n  } = useState([]);\n  const {\n    0: nowSpineIndex,\n    1: setNowSpineIndex\n  } = useState(0);\n  useEffect(() => {\n    setViewerWidth(Math.floor(window.innerWidth * (VIEWER_WIDTH_RATIO / 100)));\n    setViewerHeight(Math.floor(window.innerHeight * (VIEWER_HEIGHT_RATIO / 100)));\n  }, []);\n  const setNextSpine = useCallback(() => {\n    console.log('Set next spine', nowSpineIndex);\n    setNowSpineIndex(nowSpineIndex + 1);\n  }, [nowSpineIndex]);\n  const setPrevSpine = useCallback(() => {\n    console.log('Set prev spine', nowSpineIndex);\n    setNowSpineIndex(nowSpineIndex - 1);\n  }, [nowSpineIndex]);\n  const setViewerSpineColumnCount = useCallback((spineIndex, count) => {\n    if (spineColumnCountList.length > 0) {\n      setSpineColumnCountList([]);\n      setSpineColumnCountList([...spineColumnCountList, {\n        index: spineIndex,\n        count\n      }]);\n    }\n  }, [spineColumnCountList]);\n  console.log('AAA', spineColumnCountList);\n  return __jsx(React.Fragment, null, viewerSpines.map((viewerSpine, index) => __jsx(ViewerCount, {\n    viewerSpine: viewerSpine,\n    viewerSpineIndex: index,\n    viewerColumnCountCallback: setViewerSpineColumnCount,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })));\n};\n\nexport default ViewerPage;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerPage.tsx"],"names":["React","useCallback","useState","useEffect","ViewerCount","VIEWER_WIDTH_RATIO","VIEWER_HEIGHT_RATIO","ViewerPage","spines","viewerSpines","viewerWidth","setViewerWidth","viewerHeight","setViewerHeight","spineColumnCountList","setSpineColumnCountList","nowSpineIndex","setNowSpineIndex","Math","floor","window","innerWidth","innerHeight","setNextSpine","console","log","setPrevSpine","setViewerSpineColumnCount","spineIndex","count","length","index","map","viewerSpine"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,EAAuCC,SAAvC,QAAwD,OAAxD;AAGA,OAAOC,WAAP,MAAwB,eAAxB;AAIA,SAASC,kBAAT,EAA6BC,mBAA7B,QAAwD,wBAAxD;;AAOA,MAAMC,UAA0C,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,KAA8B;AAC/E,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCT,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM;AAAA,OAACU,YAAD;AAAA,OAAeC;AAAf,MAAkCX,QAAQ,CAAC,CAAD,CAAhD;AAEA,QAAM;AAAA,OAACY,oBAAD;AAAA,OAAuBC;AAAvB,MAAkDb,QAAQ,CAAC,EAAD,CAAhE;AACA,QAAM;AAAA,OAACc,aAAD;AAAA,OAAgBC;AAAhB,MAAoCf,QAAQ,CAAC,CAAD,CAAlD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,cAAc,CAACO,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,UAAP,IAAqBhB,kBAAkB,GAAG,GAA1C,CAAX,CAAD,CAAd;AACAQ,IAAAA,eAAe,CAACK,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACE,WAAP,IAAsBhB,mBAAmB,GAAG,GAA5C,CAAX,CAAD,CAAf;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,QAAMiB,YAAY,GAAGtB,WAAW,CAAC,MAAM;AACrCuB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BT,aAA9B;AACAC,IAAAA,gBAAgB,CAACD,aAAa,GAAG,CAAjB,CAAhB;AACD,GAH+B,EAG7B,CAACA,aAAD,CAH6B,CAAhC;AAKA,QAAMU,YAAY,GAAGzB,WAAW,CAAC,MAAM;AACrCuB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BT,aAA9B;AACAC,IAAAA,gBAAgB,CAACD,aAAa,GAAG,CAAjB,CAAhB;AACD,GAH+B,EAG7B,CAACA,aAAD,CAH6B,CAAhC;AAKA,QAAMW,yBAAyB,GAAG1B,WAAW,CAAC,CAAC2B,UAAD,EAAaC,KAAb,KAAuB;AACnE,QAAIf,oBAAoB,CAACgB,MAArB,GAA8B,CAAlC,EAAqC;AACnCf,MAAAA,uBAAuB,CAAC,EAAD,CAAvB;AACAA,MAAAA,uBAAuB,CAAC,CAAC,GAAGD,oBAAJ,EAA0B;AAChDiB,QAAAA,KAAK,EAAEH,UADyC;AAEhDC,QAAAA;AAFgD,OAA1B,CAAD,CAAvB;AAID;AACF,GAR4C,EAQ1C,CAACf,oBAAD,CAR0C,CAA7C;AAUAU,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBX,oBAAnB;AAEA,SACE,4BAWIL,YAAY,CAACuB,GAAb,CAAiB,CAACC,WAAD,EAAcF,KAAd,KACf,MAAC,WAAD;AACE,IAAA,WAAW,EAAEE,WADf;AAEE,IAAA,gBAAgB,EAAEF,KAFpB;AAGE,IAAA,yBAAyB,EAAEJ,yBAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAXJ,CADF;AAsBD,CAxDD;;AA0DA,eAAepB,UAAf","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\n\nimport Viewer from './Viewer';\nimport ViewerCount from './ViewerCount';\n\nimport { EpubSpineItem } from '../../interfaces/books';\n\nimport { VIEWER_WIDTH_RATIO, VIEWER_HEIGHT_RATIO } from '../../constants/viewer';\n\ninterface Props {\n  spines: EpubSpineItem[];\n  viewerSpines: string[];\n}\n\nconst ViewerPage: React.FunctionComponent<Props> = ({ spines, viewerSpines }) => {\n  const [viewerWidth, setViewerWidth] = useState(0);\n  const [viewerHeight, setViewerHeight] = useState(0);\n\n  const [spineColumnCountList, setSpineColumnCountList] = useState([]);\n  const [nowSpineIndex, setNowSpineIndex] = useState(0);\n\n  useEffect(() => {\n    setViewerWidth(Math.floor(window.innerWidth * (VIEWER_WIDTH_RATIO / 100)));\n    setViewerHeight(Math.floor(window.innerHeight * (VIEWER_HEIGHT_RATIO / 100)));\n  }, []);\n\n  const setNextSpine = useCallback(() => {\n    console.log('Set next spine', nowSpineIndex);\n    setNowSpineIndex(nowSpineIndex + 1);\n  }, [nowSpineIndex]);\n\n  const setPrevSpine = useCallback(() => {\n    console.log('Set prev spine', nowSpineIndex);\n    setNowSpineIndex(nowSpineIndex - 1);\n  }, [nowSpineIndex]);\n\n  const setViewerSpineColumnCount = useCallback((spineIndex, count) => {\n    if (spineColumnCountList.length > 0) {\n      setSpineColumnCountList([]);\n      setSpineColumnCountList([...spineColumnCountList, {\n        index: spineIndex,\n        count,\n      }]);\n    }\n  }, [spineColumnCountList]);\n\n  console.log('AAA', spineColumnCountList);\n\n  return (\n    <>\n      {/* <Viewer\n        viewerWidth={viewerWidth}\n        viewerHeight={viewerHeight}\n        nowSpineIndex={nowSpineIndex}\n        spine={spines[nowSpineIndex]}\n        viewerSpine={viewerSpines[nowSpineIndex]}\n        setNextSpine={setNextSpine}\n        setPrevSpine={setPrevSpine}\n      /> */}\n      {\n        viewerSpines.map((viewerSpine, index) => (\n          <ViewerCount\n            viewerSpine={viewerSpine}\n            viewerSpineIndex={index}\n            viewerColumnCountCallback={setViewerSpineColumnCount}\n          />\n        ))\n      }\n    </>\n  );\n};\n\nexport default ViewerPage;\n"]},"metadata":{},"sourceType":"module"}