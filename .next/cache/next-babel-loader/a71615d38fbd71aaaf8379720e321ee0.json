{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCount.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ViewerArticle, ViewerSection, ViewerContents } from '../../styles/viewer';\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\nvar HiddenArticle = styled(ViewerArticle).withConfig({\n  displayName: \"ViewerCount__HiddenArticle\",\n  componentId: \"sc-1llu6pn-0\"\n})([\"overflow:scroll;\"]);\nvar HiddenSection = styled(ViewerSection).withConfig({\n  displayName: \"ViewerCount__HiddenSection\",\n  componentId: \"sc-1llu6pn-1\"\n})([\"visibility:hidden;\"]);\n\nvar ViewerCount = function ViewerCount(_ref) {\n  var viewerWidth = _ref.viewerWidth,\n      viewerHeight = _ref.viewerHeight,\n      viewer = _ref.viewer,\n      viewerStyle = _ref.viewerStyle,\n      setCountCallback = _ref.setCountCallback;\n  var hiddenViewContainerRef = useRef(null);\n  var hiddenViewSectionRef = useRef(null);\n  useEffect(function () {\n    if (viewerWidth) {\n      var hiddenViewContainerCurrent = hiddenViewContainerRef.current;\n\n      var _count = hiddenViewContainerCurrent.scrollWidth / (viewerWidth + VIEWER_PAGE_GAP);\n\n      setCountCallback(_count);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [viewerWidth]);\n  return __jsx(HiddenArticle, {\n    styleProps: _objectSpread({}, viewerStyle, {\n      width: viewerWidth,\n      height: viewerHeight\n    }),\n    ref: hiddenViewContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, __jsx(HiddenSection, {\n    styleProps: {\n      width: viewerWidth\n    },\n    ref: hiddenViewSectionRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, __jsx(ViewerContents, {\n    dangerouslySetInnerHTML: {\n      __html: viewer\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })));\n};\n\nexport default ViewerCount;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCount.tsx"],"names":["React","useRef","useEffect","styled","ViewerArticle","ViewerSection","ViewerContents","VIEWER_PAGE_GAP","HiddenArticle","HiddenSection","ViewerCount","viewerWidth","viewerHeight","viewer","viewerStyle","setCountCallback","hiddenViewContainerRef","hiddenViewSectionRef","hiddenViewContainerCurrent","current","count","scrollWidth","width","height","__html"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AAGA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,SACEC,aADF,EAEEC,aAFF,EAGEC,cAHF,QAIO,qBAJP;AAQA,SAASC,eAAT,QAAgC,wBAAhC;AAKA,IAAMC,aAAa,GAAGL,MAAM,CAACC,aAAD,CAAT;AAAA;AAAA;AAAA,wBAAnB;AAIA,IAAMK,aAAa,GAAGN,MAAM,CAACE,aAAD,CAAT;AAAA;AAAA;AAAA,0BAAnB;;AAYA,IAAMK,WAA2C,GAAG,SAA9CA,WAA8C,OAI9C;AAAA,MAHJC,WAGI,QAHJA,WAGI;AAAA,MAHSC,YAGT,QAHSA,YAGT;AAAA,MAFJC,MAEI,QAFJA,MAEI;AAAA,MADJC,WACI,QADJA,WACI;AAAA,MADSC,gBACT,QADSA,gBACT;AACJ,MAAMC,sBAAsB,GAAGf,MAAM,CAAC,IAAD,CAArC;AACA,MAAMgB,oBAAoB,GAAGhB,MAAM,CAAC,IAAD,CAAnC;AAEAC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIS,WAAJ,EAAiB;AAAA,UACEO,0BADF,GACiCF,sBADjC,CACPG,OADO;;AAEf,UAAMC,MAAK,GAAGF,0BAA0B,CAACG,WAA3B,IAA0CV,WAAW,GAAGJ,eAAxD,CAAd;;AAEAQ,MAAAA,gBAAgB,CAACK,MAAD,CAAhB;AACD,KANa,CAOhB;;AACC,GARQ,EAQN,CAACT,WAAD,CARM,CAAT;AAUA,SACE,MAAC,aAAD;AACE,IAAA,UAAU,oBACLG,WADK;AAERQ,MAAAA,KAAK,EAAEX,WAFC;AAGRY,MAAAA,MAAM,EAAEX;AAHA,MADZ;AAME,IAAA,GAAG,EAAEI,sBANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE,MAAC,aAAD;AACE,IAAA,UAAU,EAAE;AACVM,MAAAA,KAAK,EAAEX;AADG,KADd;AAIE,IAAA,GAAG,EAAEM,oBAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,MAAC,cAAD;AAAgB,IAAA,uBAAuB,EAAE;AAAEO,MAAAA,MAAM,EAAEX;AAAV,KAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CARF,CADF;AAmBD,CArCD;;AAuCA,eAAeH,WAAf","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport {\n  ViewerArticle,\n  ViewerSection,\n  ViewerContents,\n} from '../../styles/viewer';\n\nimport * as viewerActions from '../../reducers/viewer';\n\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\nimport { EpubSpineItem } from '../../interfaces/books';\nimport { ViewerStyle } from '../../interfaces/viewer';\n\nconst HiddenArticle = styled(ViewerArticle)`\n  overflow: scroll;\n`;\n\nconst HiddenSection = styled(ViewerSection)`\n  visibility: hidden;\n`;\n\ninterface Props {\n  viewerWidth: number;\n  viewerHeight: number;\n  viewer: string;\n  viewerStyle: ViewerStyle;\n  setCountCallback: (count: number) => void;\n}\n\nconst ViewerCount: React.FunctionComponent<Props> = ({\n  viewerWidth, viewerHeight,\n  viewer,\n  viewerStyle, setCountCallback,\n}) => {\n  const hiddenViewContainerRef = useRef(null);\n  const hiddenViewSectionRef = useRef(null);\n\n  useEffect(() => {\n    if (viewerWidth) {\n      const { current: hiddenViewContainerCurrent } = hiddenViewContainerRef;\n      const count = hiddenViewContainerCurrent.scrollWidth / (viewerWidth + VIEWER_PAGE_GAP);\n\n      setCountCallback(count);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewerWidth]);\n\n  return (\n    <HiddenArticle\n      styleProps={{\n        ...viewerStyle,\n        width: viewerWidth,\n        height: viewerHeight,\n      }}\n      ref={hiddenViewContainerRef}\n    >\n      <HiddenSection\n        styleProps={{\n          width: viewerWidth,\n        }}\n        ref={hiddenViewSectionRef}\n      >\n        <ViewerContents dangerouslySetInnerHTML={{ __html: viewer }} />\n      </HiddenSection>\n    </HiddenArticle>\n  );\n};\n\nexport default ViewerCount;\n"]},"metadata":{},"sourceType":"module"}