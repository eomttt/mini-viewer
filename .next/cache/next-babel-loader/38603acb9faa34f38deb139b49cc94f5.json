{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCalculator.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport ViewerCount from './ViewerCount';\nimport { ViewerArticle, ViewerSection } from '../../styles/viewer';\nvar HiddenArticle = styled(ViewerArticle).withConfig({\n  displayName: \"ViewerCalculator__HiddenArticle\",\n  componentId: \"sc-1k3xwrw-0\"\n})([\"overflow:scroll;\"]);\nvar HiddenSection = styled(ViewerSection).withConfig({\n  displayName: \"ViewerCalculator__HiddenSection\",\n  componentId: \"sc-1k3xwrw-1\"\n})([\"visibility:hidden;\"]);\n\nvar ViewerCalculator = function ViewerCalculator(_ref) {\n  var viewerWidth = _ref.viewerWidth,\n      viewerHeight = _ref.viewerHeight,\n      viewers = _ref.viewers,\n      spines = _ref.spines,\n      viewerStyle = _ref.viewerStyle;\n  var test = [];\n\n  var _useState = useState([]),\n      item = _useState[0],\n      setItem = _useState[1];\n\n  var _setCountCallback = useCallback(function (count, index) {\n    var spine = spines[index];\n    test.push({\n      index: index,\n      count: count,\n      spineId: spine.id\n    });\n    setItem([].concat(_toConsumableArray(item), [{\n      index: index,\n      count: count,\n      spineId: spine.id\n    }]));\n  }, [spines, item, test]);\n\n  useEffect(function () {\n    console.log(\"AAAA\", item);\n    console.log(\"BBB\", test);\n  }, [item, test]);\n  return __jsx(React.Fragment, null, viewers.map(function (viewer, index) {\n    return __jsx(ViewerCount, {\n      key: viewer,\n      viewerWidth: viewerWidth,\n      viewerHeight: viewerHeight,\n      viewer: viewer,\n      viewerStyle: viewerStyle,\n      setCountCallback: function setCountCallback(count) {\n        return _setCountCallback(count, index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    });\n  }));\n};\n\nexport default ViewerCalculator;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCalculator.tsx"],"names":["React","useEffect","useCallback","useState","styled","ViewerCount","ViewerArticle","ViewerSection","HiddenArticle","HiddenSection","ViewerCalculator","viewerWidth","viewerHeight","viewers","spines","viewerStyle","test","item","setItem","setCountCallback","count","index","spine","push","spineId","id","console","log","map","viewer"],"mappings":";;;AAAA,OAAOA,KAAP,IAAwBC,SAAxB,EAAmCC,WAAnC,EAAgDC,QAAhD,QAAgE,OAAhE;AAGA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,SACEC,aADF,EAEEC,aAFF,QAIO,qBAJP;AAaA,IAAMC,aAAa,GAAGJ,MAAM,CAACE,aAAD,CAAT;AAAA;AAAA;AAAA,wBAAnB;AAIA,IAAMG,aAAa,GAAGL,MAAM,CAACG,aAAD,CAAT;AAAA;AAAA;AAAA,0BAAnB;;AAYA,IAAMG,gBAAgD,GAAG,SAAnDA,gBAAmD,OAInD;AAAA,MAHJC,WAGI,QAHJA,WAGI;AAAA,MAHSC,YAGT,QAHSA,YAGT;AAAA,MAFJC,OAEI,QAFJA,OAEI;AAAA,MAFKC,MAEL,QAFKA,MAEL;AAAA,MADJC,WACI,QADJA,WACI;AACJ,MAAMC,IAAI,GAAG,EAAb;;AADI,kBAEoBb,QAAQ,CAAC,EAAD,CAF5B;AAAA,MAEGc,IAFH;AAAA,MAESC,OAFT;;AAIJ,MAAMC,iBAAgB,GAAGjB,WAAW,CAAC,UAACkB,KAAD,EAAgBC,KAAhB,EAAkC;AACrE,QAAMC,KAAK,GAAGR,MAAM,CAACO,KAAD,CAApB;AAEAL,IAAAA,IAAI,CAACO,IAAL,CAAU;AACRF,MAAAA,KAAK,EAALA,KADQ;AAERD,MAAAA,KAAK,EAALA,KAFQ;AAGRI,MAAAA,OAAO,EAAEF,KAAK,CAACG;AAHP,KAAV;AAKAP,IAAAA,OAAO,8BAAKD,IAAL,IAAW;AAChBI,MAAAA,KAAK,EAALA,KADgB;AAEhBD,MAAAA,KAAK,EAALA,KAFgB;AAGhBI,MAAAA,OAAO,EAAEF,KAAK,CAACG;AAHC,KAAX,GAAP;AAKD,GAbmC,EAajC,CAACX,MAAD,EAASG,IAAT,EAAeD,IAAf,CAbiC,CAApC;;AAeAf,EAAAA,SAAS,CAAC,YAAM;AACdyB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBV,IAApB;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBX,IAAnB;AACD,GAHQ,EAGN,CAACC,IAAD,EAAOD,IAAP,CAHM,CAAT;AAKA,SACE,4BAEIH,OAAO,CAACe,GAAR,CAAY,UAACC,MAAD,EAASR,KAAT;AAAA,WACV,MAAC,WAAD;AACE,MAAA,GAAG,EAAEQ,MADP;AAEE,MAAA,WAAW,EAAElB,WAFf;AAGE,MAAA,YAAY,EAAEC,YAHhB;AAIE,MAAA,MAAM,EAAEiB,MAJV;AAKE,MAAA,WAAW,EAAEd,WALf;AAME,MAAA,gBAAgB,EAAE,0BAACK,KAAD;AAAA,eAAWD,iBAAgB,CAACC,KAAD,EAAQC,KAAR,CAA3B;AAAA,OANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADU;AAAA,GAAZ,CAFJ,CADF;AAiBD,CA7CD;;AA+CA,eAAeX,gBAAf","sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport ViewerCount from './ViewerCount';\n\nimport {\n  ViewerArticle,\n  ViewerSection,\n  ViewerContents,\n} from '../../styles/viewer';\n\nimport * as viewerActions from '../../reducers/viewer';\n\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\nimport { EpubSpineItem } from '../../interfaces/books';\nimport { ViewerStyle } from '../../interfaces/viewer';\n\nconst HiddenArticle = styled(ViewerArticle)`\n  overflow: scroll;\n`;\n\nconst HiddenSection = styled(ViewerSection)`\n  visibility: hidden;\n`;\n\ninterface Props {\n  viewerWidth: number;\n  viewerHeight: number;\n  viewers: string[];\n  spines: EpubSpineItem[];\n  viewerStyle: ViewerStyle;\n}\n\nconst ViewerCalculator: React.FunctionComponent<Props> = ({\n  viewerWidth, viewerHeight,\n  viewers, spines,\n  viewerStyle,\n}) => {\n  const test = [];\n  const [item, setItem] = useState([]);\n\n  const setCountCallback = useCallback((count: number, index: number) => {\n    const spine = spines[index];\n\n    test.push({\n      index,\n      count,\n      spineId: spine.id,\n    })\n    setItem([...item, {\n      index,\n      count,\n      spineId: spine.id,\n    }]);\n  }, [spines, item, test]);\n\n  useEffect(() => {\n    console.log(\"AAAA\", item);\n    console.log(\"BBB\", test);\n  }, [item, test]);\n\n  return (\n    <>\n      {\n        viewers.map((viewer, index) => (\n          <ViewerCount\n            key={viewer}\n            viewerWidth={viewerWidth}\n            viewerHeight={viewerHeight}\n            viewer={viewer}\n            viewerStyle={viewerStyle}\n            setCountCallback={(count) => setCountCallback(count, index)}\n          />\n        ))\n      }\n    </>\n\n  );\n};\n\nexport default ViewerCalculator;\n"]},"metadata":{},"sourceType":"module"}