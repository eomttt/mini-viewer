{"ast":null,"code":"var _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCount.tsx\";\nvar __jsx = React.createElement;\nimport React, { useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport styled from 'styled-components';\nimport { ViewArticleStyle, ViewSectionStyle, ViewerContentsStyle } from '../../styles/viewer';\nimport * as viewerActions from '../../reducers/viewer';\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\nvar HiddenViewArticle = styled.article.withConfig({\n  displayName: \"ViewerCount__HiddenViewArticle\",\n  componentId: \"sc-1llu6pn-0\"\n})([\"\", \" width:\", \"px;height:\", \"px;overflow:scroll;\"], ViewArticleStyle, function (props) {\n  return props.styleProps.width;\n}, function (props) {\n  return props.styleProps.height;\n});\nvar HiddenViewSection = styled.section.withConfig({\n  displayName: \"ViewerCount__HiddenViewSection\",\n  componentId: \"sc-1llu6pn-1\"\n})([\"\", \" column-width:\", \"px;visibility:hidden;\"], ViewSectionStyle, function (props) {\n  return props.styleProps.width;\n});\nvar Contents = styled.div.withConfig({\n  displayName: \"ViewerCount__Contents\",\n  componentId: \"sc-1llu6pn-2\"\n})([\"\", \"\"], ViewerContentsStyle);\n\nvar ViewerCount = function ViewerCount(_ref) {\n  var viewerWidth = _ref.viewerWidth,\n      viewerHeight = _ref.viewerHeight,\n      viewerSpineIndex = _ref.viewerSpineIndex,\n      viewerSpine = _ref.viewerSpine,\n      spine = _ref.spine,\n      viewerStyle = _ref.viewerStyle;\n  var dispatch = useDispatch();\n  var hiddenViewContainerRef = useRef(null);\n  var hiddenViewSectionRef = useRef(null);\n  useEffect(function () {\n    if (viewerWidth) {\n      var hiddenViewContainerCurrent = hiddenViewContainerRef.current;\n      var count = hiddenViewContainerCurrent.scrollWidth / (viewerWidth + VIEWER_PAGE_GAP);\n      dispatch(viewerActions.setViewerColumnCount({\n        count: count,\n        index: viewerSpineIndex,\n        spineId: spine.id\n      }));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [viewerWidth]);\n  return __jsx(HiddenViewArticle, {\n    styleProps: {\n      width: viewerWidth,\n      height: viewerHeight\n    },\n    ref: hiddenViewContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, __jsx(HiddenViewSection, {\n    styleProps: {\n      width: viewerWidth\n    },\n    ref: hiddenViewSectionRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(Contents, {\n    dangerouslySetInnerHTML: {\n      __html: viewerSpine\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })));\n};\n\nexport default ViewerCount;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerCount.tsx"],"names":["React","useRef","useEffect","useDispatch","styled","ViewArticleStyle","ViewSectionStyle","ViewerContentsStyle","viewerActions","VIEWER_PAGE_GAP","HiddenViewArticle","article","props","styleProps","width","height","HiddenViewSection","section","Contents","div","ViewerCount","viewerWidth","viewerHeight","viewerSpineIndex","viewerSpine","spine","viewerStyle","dispatch","hiddenViewContainerRef","hiddenViewSectionRef","hiddenViewContainerCurrent","current","count","scrollWidth","setViewerColumnCount","index","spineId","id","__html"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,SACEC,gBADF,EACoBC,gBADpB,EACsCC,mBADtC,QAEO,qBAFP;AAIA,OAAO,KAAKC,aAAZ,MAA+B,uBAA/B;AAEA,SAASC,eAAT,QAAgC,wBAAhC;AAKA,IAAMC,iBAAiB,GAAGN,MAAM,CAACO,OAAV;AAAA;AAAA;AAAA,yDACnBN,gBADmB,EAEZ,UAACO,KAAD;AAAA,SAAWA,KAAK,CAACC,UAAN,CAAiBC,KAA5B;AAAA,CAFY,EAGX,UAACF,KAAD;AAAA,SAAWA,KAAK,CAACC,UAAN,CAAiBE,MAA5B;AAAA,CAHW,CAAvB;AAOA,IAAMC,iBAAiB,GAAGZ,MAAM,CAACa,OAAV;AAAA;AAAA;AAAA,oDACnBX,gBADmB,EAEL,UAACM,KAAD;AAAA,SAAWA,KAAK,CAACC,UAAN,CAAiBC,KAA5B;AAAA,CAFK,CAAvB;AAMA,IAAMI,QAAQ,GAAGd,MAAM,CAACe,GAAV;AAAA;AAAA;AAAA,aACVZ,mBADU,CAAd;;AAaA,IAAMa,WAA2C,GAAG,SAA9CA,WAA8C,OAI9C;AAAA,MAHJC,WAGI,QAHJA,WAGI;AAAA,MAHSC,YAGT,QAHSA,YAGT;AAAA,MAFJC,gBAEI,QAFJA,gBAEI;AAAA,MAFcC,WAEd,QAFcA,WAEd;AAAA,MAF2BC,KAE3B,QAF2BA,KAE3B;AAAA,MADJC,WACI,QADJA,WACI;AACJ,MAAMC,QAAQ,GAAGxB,WAAW,EAA5B;AACA,MAAMyB,sBAAsB,GAAG3B,MAAM,CAAC,IAAD,CAArC;AACA,MAAM4B,oBAAoB,GAAG5B,MAAM,CAAC,IAAD,CAAnC;AAEAC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAImB,WAAJ,EAAiB;AAAA,UACES,0BADF,GACiCF,sBADjC,CACPG,OADO;AAEf,UAAMC,KAAK,GAAGF,0BAA0B,CAACG,WAA3B,IAA0CZ,WAAW,GAAGZ,eAAxD,CAAd;AAEAkB,MAAAA,QAAQ,CAACnB,aAAa,CAAC0B,oBAAd,CAAmC;AAC1CF,QAAAA,KAAK,EAALA,KAD0C;AAE1CG,QAAAA,KAAK,EAAEZ,gBAFmC;AAG1Ca,QAAAA,OAAO,EAAEX,KAAK,CAACY;AAH2B,OAAnC,CAAD,CAAR;AAKD,KAVa,CAYhB;;AACC,GAbQ,EAaN,CAAChB,WAAD,CAbM,CAAT;AAeA,SACE,MAAC,iBAAD;AACE,IAAA,UAAU,EAAE;AACVP,MAAAA,KAAK,EAAEO,WADG;AAEVN,MAAAA,MAAM,EAAEO;AAFE,KADd;AAKE,IAAA,GAAG,EAAEM,sBALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,iBAAD;AACE,IAAA,UAAU,EAAE;AACVd,MAAAA,KAAK,EAAEO;AADG,KADd;AAIE,IAAA,GAAG,EAAEQ,oBAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,MAAC,QAAD;AAAU,IAAA,uBAAuB,EAAE;AAAES,MAAAA,MAAM,EAAEd;AAAV,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CAPF,CADF;AAmBD,CA3CD;;AA6CA,eAAeJ,WAAf","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport {\n  ViewArticleStyle, ViewSectionStyle, ViewerContentsStyle,\n} from '../../styles/viewer';\n\nimport * as viewerActions from '../../reducers/viewer';\n\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\nimport { EpubSpineItem } from '../../interfaces/books';\nimport { ViewerStyle } from '../../interfaces/viewer';\n\nconst HiddenViewArticle = styled.article`\n  ${ViewArticleStyle}\n  width: ${(props) => props.styleProps.width}px;\n  height: ${(props) => props.styleProps.height}px;\n  overflow: scroll;\n`;\n\nconst HiddenViewSection = styled.section`\n  ${ViewSectionStyle}\n  column-width: ${(props) => props.styleProps.width}px;\n  visibility: hidden;\n`;\n\nconst Contents = styled.div`\n  ${ViewerContentsStyle}\n`;\n\ninterface Props {\n  viewerWidth: number;\n  viewerHeight: number;\n  viewerSpineIndex: number;\n  viewerSpine: string;\n  spine: EpubSpineItem;\n  viewerStyle: ViewerStyle;\n}\n\nconst ViewerCount: React.FunctionComponent<Props> = ({\n  viewerWidth, viewerHeight,\n  viewerSpineIndex, viewerSpine, spine,\n  viewerStyle,\n}) => {\n  const dispatch = useDispatch();\n  const hiddenViewContainerRef = useRef(null);\n  const hiddenViewSectionRef = useRef(null);\n\n  useEffect(() => {\n    if (viewerWidth) {\n      const { current: hiddenViewContainerCurrent } = hiddenViewContainerRef;\n      const count = hiddenViewContainerCurrent.scrollWidth / (viewerWidth + VIEWER_PAGE_GAP);\n\n      dispatch(viewerActions.setViewerColumnCount({\n        count,\n        index: viewerSpineIndex,\n        spineId: spine.id,\n      }));\n    }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewerWidth]);\n\n  return (\n    <HiddenViewArticle\n      styleProps={{\n        width: viewerWidth,\n        height: viewerHeight,\n      }}\n      ref={hiddenViewContainerRef}\n    >\n      <HiddenViewSection\n        styleProps={{\n          width: viewerWidth,\n        }}\n        ref={hiddenViewSectionRef}\n      >\n        <Contents dangerouslySetInnerHTML={{ __html: viewerSpine }} />\n      </HiddenViewSection>\n    </HiddenViewArticle>\n\n  );\n};\n\nexport default ViewerCount;\n"]},"metadata":{},"sourceType":"module"}