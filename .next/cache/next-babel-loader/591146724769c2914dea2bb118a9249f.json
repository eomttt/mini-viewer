{"ast":null,"code":"var _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport styled from 'styled-components';\nconst Container = styled.div.withConfig({\n  displayName: \"pages__Container\",\n  componentId: \"sc-18mi7mi-0\"\n})([\"\"]);\n\nconst Home = bookInfo => {\n  console.log('RRR', bookInfo);\n  const {\n    items,\n    book,\n    basePath\n  } = bookInfo;\n  const {\n    items: bookItems,\n    images,\n    styles,\n    ncx\n  } = book;\n  const imagesId = images.map(image => image.id);\n  const stylesId = styles.map(style => style.id);\n\n  const renderItems = () => bookItems.map((bookItem, idx) => {\n    if (imagesId.includes(bookItem.id)) {\n      return __jsx(\"img\", {\n        src: `${basePath}/${bookItem.href}`,\n        alt: \"test\",\n        key: idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      });\n    }\n\n    if (stylesId.includes(bookItem.id)) {\n      return __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: `${basePath}/${bookItem.href}`,\n        key: idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      });\n    }\n\n    if (ncx.id === bookItem.id) {\n      return __jsx(\"div\", {\n        key: idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, \"NCX\");\n    } // eslint-disable-next-line react/no-danger\n\n\n    return __jsx(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: items[idx]\n      },\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    });\n  });\n\n  return __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, renderItems());\n};\n\nHome.getInitialProps = async context => {\n  const {\n    req\n  } = context;\n\n  if (req) {\n    const {\n      EpubParser\n    } = require('@ridi/epub-parser');\n\n    try {\n      const parser = new EpubParser('public/pg61625-images.epub');\n      const book = await parser.parse({\n        validatePackage: true,\n        parseStyle: false,\n        unzipPath: 'public/epub/pg61625-images'\n      });\n      const spines = await parser.readItems(book.spines);\n      const items = await parser.readItems(book.items, {\n        force: true,\n        extractBody: true,\n        serializedAnchor: true,\n        ignoreScript: true,\n        basePath: 'epub/pg61625-images'\n      });\n      return {\n        book,\n        spines,\n        items,\n        basePath: 'epub/pg61625-images'\n      };\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  return {};\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/pages/index.tsx"],"names":["React","styled","Container","div","Home","bookInfo","console","log","items","book","basePath","bookItems","images","styles","ncx","imagesId","map","image","id","stylesId","style","renderItems","bookItem","idx","includes","href","__html","getInitialProps","context","req","EpubParser","require","parser","parse","validatePackage","parseStyle","unzipPath","spines","readItems","force","extractBody","serializedAnchor","ignoreScript","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { NextPageContext } from 'next';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n`;\n\nconst Home = (bookInfo) => {\n  console.log('RRR', bookInfo);\n  const { items, book, basePath } = bookInfo;\n\n  const {\n    items: bookItems, images, styles, ncx,\n  } = book;\n\n  const imagesId = images.map((image) => image.id);\n  const stylesId = styles.map((style) => style.id);\n\n  const renderItems = (): JSX.Element => bookItems.map((bookItem, idx) => {\n    if (imagesId.includes(bookItem.id)) {\n      return <img src={`${basePath}/${bookItem.href}`} alt=\"test\" key={idx} />;\n    }\n    if (stylesId.includes(bookItem.id)) {\n      return <link rel=\"stylesheet\" href={`${basePath}/${bookItem.href}`} key={idx} />;\n    }\n    if (ncx.id === bookItem.id) {\n      return <div key={idx}>NCX</div>;\n    }\n    // eslint-disable-next-line react/no-danger\n    return <div dangerouslySetInnerHTML={{ __html: items[idx] }} key={idx} />;\n  });\n\n  return (\n    <Container>\n      {renderItems()}\n    </Container>\n  );\n};\n\nHome.getInitialProps = async (context: NextPageContext): Promise<any> => {\n  const { req } = context;\n  if (req) {\n    const { EpubParser } = require('@ridi/epub-parser');\n    try {\n      const parser = new EpubParser('public/pg61625-images.epub');\n      const book = await parser.parse({\n        validatePackage: true,\n        parseStyle: false,\n        unzipPath: 'public/epub/pg61625-images',\n      });\n      const spines = await parser.readItems(book.spines);\n      const items = await parser.readItems(book.items, {\n        force: true,\n        extractBody: true,\n        serializedAnchor: true,\n        ignoreScript: true,\n        basePath: 'epub/pg61625-images',\n      });\n\n      return {\n        book,\n        spines,\n        items,\n        basePath: 'epub/pg61625-images',\n      };\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n\n  return {};\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}