{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerPage.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable react/no-danger */\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport styled from 'styled-components';\nimport { ViewerButton, ViewerArticle, ViewerSection, ViewerContents } from '../../styles/viewer';\nimport * as viewerActions from '../../reducers/viewer';\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\nvar Article = styled(ViewerArticle).withConfig({\n  displayName: \"ViewerPage__Article\",\n  componentId: \"sc-14mn4t-0\"\n})([\"overflow:hidden;\"]);\nvar RightButton = styled(ViewerButton).withConfig({\n  displayName: \"ViewerPage__RightButton\",\n  componentId: \"sc-14mn4t-1\"\n})([\"right:2em;\"]);\nvar LeftButton = styled(ViewerButton).withConfig({\n  displayName: \"ViewerPage__LeftButton\",\n  componentId: \"sc-14mn4t-2\"\n})([\"left:2em;\"]);\n\nvar ViewerPage = function ViewerPage(_ref) {\n  var viewerWidth = _ref.viewerWidth,\n      viewerHeight = _ref.viewerHeight,\n      pageColumnOffset = _ref.pageColumnOffset,\n      viewerSpine = _ref.viewerSpine,\n      isFirstPage = _ref.isFirstPage,\n      isLastPage = _ref.isLastPage,\n      viewerStyle = _ref.viewerStyle;\n  var widthRatio = viewerStyle.widthRatio;\n  var dispatch = useDispatch();\n\n  var _useState = useState(viewerWidth),\n      newViewerWidth = _useState[0],\n      setNewViewerWidth = _useState[1];\n\n  var _useState2 = useState(0),\n      nowViewerCount = _useState2[0],\n      setNowViewerCount = _useState2[1];\n\n  var viewArticleRef = useRef(null);\n  useEffect(function () {\n    if (widthRatio) {\n      setNewViewerWidth(Math.floor(Number(viewerWidth) * (Number(widthRatio) / 100)));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [widthRatio]);\n  useEffect(function () {\n    var viewArticleRefCurrent = viewArticleRef.current;\n    viewArticleRefCurrent.scrollLeft = pageColumnOffset * (newViewerWidth + VIEWER_PAGE_GAP);\n    setNowViewerCount(pageColumnOffset);\n  }, [viewerSpine, pageColumnOffset, newViewerWidth]);\n  var clickRight = useCallback(function () {\n    var viewArticleRefCurrent = viewArticleRef.current;\n    setNowViewerCount(nowViewerCount + 1);\n    viewArticleRefCurrent.scrollLeft += newViewerWidth + VIEWER_PAGE_GAP;\n    dispatch(viewerActions.setCountUpViewerPageCount());\n  }, [dispatch, nowViewerCount, newViewerWidth]);\n  var clickLeft = useCallback(function () {\n    var viewArticleRefCurrent = viewArticleRef.current;\n    setNowViewerCount(nowViewerCount - 1);\n    viewArticleRefCurrent.scrollLeft -= newViewerWidth + VIEWER_PAGE_GAP;\n    dispatch(viewerActions.setCountDownViewerPageCount());\n  }, [dispatch, nowViewerCount, newViewerWidth]);\n  return __jsx(React.Fragment, null, __jsx(Article, {\n    ref: viewArticleRef,\n    onClick: clickRight,\n    styleProps: _objectSpread({}, viewerStyle, {\n      width: newViewerWidth,\n      height: viewerHeight\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(ViewerSection, {\n    styleProps: _objectSpread({}, viewerStyle, {\n      width: newViewerWidth,\n      height: viewerHeight\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(ViewerContents, {\n    dangerouslySetInnerHTML: {\n      __html: viewerSpine\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }))), !isFirstPage && __jsx(LeftButton, {\n    onClick: clickLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Left\"), !isLastPage && __jsx(RightButton, {\n    onClick: clickRight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Right\"));\n};\n\nexport default ViewerPage;","map":{"version":3,"sources":["/Users/hyuntaeeom/Projects/personal/mini-viewer/components/viewer/ViewerPage.tsx"],"names":["React","useState","useRef","useCallback","useEffect","useDispatch","styled","ViewerButton","ViewerArticle","ViewerSection","ViewerContents","viewerActions","VIEWER_PAGE_GAP","Article","RightButton","LeftButton","ViewerPage","viewerWidth","viewerHeight","pageColumnOffset","viewerSpine","isFirstPage","isLastPage","viewerStyle","widthRatio","dispatch","newViewerWidth","setNewViewerWidth","nowViewerCount","setNowViewerCount","viewArticleRef","Math","floor","Number","viewArticleRefCurrent","current","scrollLeft","clickRight","setCountUpViewerPageCount","clickLeft","setCountDownViewerPageCount","width","height","__html"],"mappings":"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","sourcesContent":["\n/* eslint-disable react/no-danger */\nimport React, {\n  useState, useRef, useCallback, useEffect,\n} from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport styled from 'styled-components';\n\nimport {\n  ViewerButton,\n  ViewerArticle,\n  ViewerSection,\n  ViewerContents,\n} from '../../styles/viewer';\n\nimport * as viewerActions from '../../reducers/viewer';\n\nimport { VIEWER_PAGE_GAP } from '../../constants/viewer';\n\nimport { ViewerStyle } from '../../interfaces/viewer';\n\nconst Article = styled(ViewerArticle)`\n  overflow: hidden;\n`;\n\nconst RightButton = styled(ViewerButton)`\n  right: 2em;\n`;\n\nconst LeftButton = styled(ViewerButton)`\n  left: 2em;\n`;\n\ninterface Props {\n  viewerWidth: number;\n  viewerHeight: number;\n  pageColumnOffset: number;\n  viewerSpine: string;\n  isFirstPage: boolean;\n  isLastPage: boolean;\n  viewerStyle: ViewerStyle;\n}\n\nconst ViewerPage: React.FunctionComponent<Props> = ({\n  viewerWidth, viewerHeight,\n  pageColumnOffset,\n  viewerSpine,\n  isFirstPage, isLastPage,\n  viewerStyle,\n}) => {\n  const { widthRatio } = viewerStyle;\n\n  const dispatch = useDispatch();\n\n  const [newViewerWidth, setNewViewerWidth] = useState(viewerWidth);\n  const [nowViewerCount, setNowViewerCount] = useState(0);\n\n  const viewArticleRef = useRef(null);\n\n  useEffect(() => {\n    if (widthRatio) {\n      setNewViewerWidth(Math.floor(Number(viewerWidth) * (Number(widthRatio) / 100)));\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [widthRatio]);\n\n  useEffect(() => {\n    const { current: viewArticleRefCurrent } = viewArticleRef;\n    viewArticleRefCurrent.scrollLeft = pageColumnOffset * (newViewerWidth + VIEWER_PAGE_GAP);\n    setNowViewerCount(pageColumnOffset);\n  }, [viewerSpine, pageColumnOffset, newViewerWidth]);\n\n  const clickRight = useCallback(() => {\n    const { current: viewArticleRefCurrent } = viewArticleRef;\n\n    setNowViewerCount(nowViewerCount + 1);\n    viewArticleRefCurrent.scrollLeft += (newViewerWidth + VIEWER_PAGE_GAP);\n    dispatch(viewerActions.setCountUpViewerPageCount());\n  }, [dispatch, nowViewerCount, newViewerWidth]);\n\n  const clickLeft = useCallback(() => {\n    const { current: viewArticleRefCurrent } = viewArticleRef;\n    setNowViewerCount(nowViewerCount - 1);\n    viewArticleRefCurrent.scrollLeft -= (newViewerWidth + VIEWER_PAGE_GAP);\n    dispatch(viewerActions.setCountDownViewerPageCount());\n  }, [dispatch, nowViewerCount, newViewerWidth]);\n\n  return (\n    <>\n      <Article\n        ref={viewArticleRef}\n        onClick={clickRight}\n        styleProps={{\n          ...viewerStyle,\n          width: newViewerWidth,\n          height: viewerHeight,\n        }}\n      >\n        <ViewerSection\n          styleProps={{\n            ...viewerStyle,\n            width: newViewerWidth,\n            height: viewerHeight,\n          }}\n        >\n          <ViewerContents dangerouslySetInnerHTML={{ __html: viewerSpine }} />\n        </ViewerSection>\n      </Article>\n      {!isFirstPage && <LeftButton onClick={clickLeft}>Left</LeftButton>}\n      {!isLastPage && <RightButton onClick={clickRight}>Right</RightButton>}\n    </>\n  );\n};\n\nexport default ViewerPage;\n"]},"metadata":{},"sourceType":"module"}