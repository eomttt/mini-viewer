(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"/EDR":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r("23aj")}])},"23aj":function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),o=r("ODXe"),c=r("q1tI"),i=r.n(c),s=r("/MKj"),u=r("nOHt"),l=r.n(u),b=r("vOnD"),p=r("vBmG"),f=r("7b7C"),d=i.a.createElement,v=b.a.ul.withConfig({displayName:"BookList__Container",componentId:"sc-14s4gg1-0"})([""]),O=b.a.li.withConfig({displayName:"BookList__CoverImage",componentId:"sc-14s4gg1-1"})(["width:10em;border:1px solid ",";display:inline-block;margin:1em;vertical-align:bottom;cursor:grab;padding:0;& img{width:100%;user-select:none;}"],p.b),g=function(e){var t=e.books,r=Object(c.useState)(t),n=r[0],a=r[1],o=Object(c.useState)(null),i=o[0],s=o[1],u=Object(c.useCallback)((function(e){var t=n[e];l.a.push({pathname:f.i,query:{bookPath:encodeURI(t.publicPath)}})}),[n]),b=Object(c.useCallback)((function(e,t){s(n[t]),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.dataTransfer.setDragImage(e.target.parentNode,20,20)}),[n]),p=Object(c.useCallback)((function(e,t){e.preventDefault();var r=n[t];if(i.publicPath!==r.publicPath){var o=n.filter((function(e){return e.publicPath!==i.publicPath}));o.splice(t,0,i),a(o)}}),[n,i]),g=Object(c.useCallback)((function(e){e.preventDefault()}),[]);return d(v,null,n.map((function(e,t){var r=e.book,n=e.publicPath;return d(O,{onClick:function(){return u(t)},onDragOver:function(e){return p(e,t)},key:n},d("img",{src:r.cover?"".concat(n,"/").concat(r.cover.href):"default-book.png",draggable:!0,onDragStart:function(e){return b(e,t)},onDragEnd:g,alt:"Cover"}))})))},h=r("WIAH"),k=r("dTf1"),j=r("apO0"),w=i.a.createElement,y=function(){var e=Object(s.c)((function(e){return e.books})).list;return Object(c.useEffect)((function(){e||window.location.reload()}),[e]),w(j.a,null,e&&w(g,{books:e}))};y.getInitialProps=function(e){var t,n,c,i,s,u,l,b,p,f,d,v,O,g,j,w,y,m,P,E;return a.a.async((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=e.req,n=e.store,!t){_.next=46;break}c=r("Po9p"),i=r("kCIj"),s=i.EpubParser,u=c.readdirSync("public/"),l=[],b=!0,p=!1,f=void 0,_.prev=9,d=u[Symbol.iterator]();case 11:if(b=(v=d.next()).done){_.next=31;break}if(O=v.value,!Object(k.c)(O)){_.next=28;break}return g=O.split(".epub"),j=Object(o.a)(g,1),w=j[0],y="epub/".concat(w),_.prev=16,_.next=19,a.a.awrap(Object(k.a)(s,{epubFile:w,epubPath:y}));case 19:m=_.sent,P=m.book,E=m.viewers,l.push({book:P,viewers:E,publicPath:y}),_.next=28;break;case 25:_.prev=25,_.t0=_.catch(16),console.log("Error index.",_.t0);case 28:b=!0,_.next=11;break;case 31:_.next=37;break;case 33:_.prev=33,_.t1=_.catch(9),p=!0,f=_.t1;case 37:_.prev=37,_.prev=38,b||null==d.return||d.return();case 40:if(_.prev=40,!p){_.next=43;break}throw f;case 43:return _.finish(40);case 44:return _.finish(37);case 45:n.dispatch(h.b(l));case 46:case"end":return _.stop()}}),null,null,[[9,33,37,45],[16,25],[38,,40,44]],Promise)};t.default=y},WIAH:function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));var n=r("KQm4"),a=r("rePB");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i={list:null,styles:[]},s=function(e){return{type:"books/SET_BOOK_LIST",payload:{list:e}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,r=t.type,a=t.payload;switch(r){case"books/SET_BOOK_LIST":var o=a.list;return c({},e,{list:Object(n.a)(o)});case"books/SET_BOOK_STYLES":var s=a.styles;return c({},e,{styles:Object(n.a)(s)});default:return e}}}},[["/EDR",1,2,5,0,3,4,6]]]);